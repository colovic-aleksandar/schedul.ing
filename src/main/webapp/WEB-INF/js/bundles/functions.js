const allSchedulesURL="http://localhost:8080/schedules/all",allUsersURL="http://localhost:8080/admin/users",allEventsURL="http://localhost:8080/admin/events",eventAttendeesCountURL="http://localhost:8080/admin/schedules/event/",deleteUserURL="http://localhost:8080/admin/users/",deleteScheduleURL="http://localhost:8080/admin/schedules/",deleteEventURL="http://localhost:8080/admin/events/",getUserURL="http://localhost:8080/users/";var manageModal=document.getElementById("manageModal"),confirmModal=document.getElementById("confirmModal"),manageModalButton=document.getElementById("addEventButton"),closeManageModalButton=document.getElementsByClassName("close")[0],closeConfirmModalButton=document.getElementsByClassName("close")[1],confrimModalText=document.getElementById("confirmModalText"),confirmModalUserAccept=document.getElementById("deleteUserButtonAccept"),confirmModalScheduleAccept=document.getElementById("deleteScheduleButtonAccept"),confirmModalEventAccept=document.getElementById("deleteEventButtonAccept"),confirmModalCancelButton=document.getElementById("confirmModalCancel"),schedulesTableButton=document.getElementsByClassName("admin__container_swapButtons--btnEvents"),usersTableButton=document.getElementsByClassName("admin__container_swapButtons--btnUsers"),eventsTableButton=document.getElementsByClassName("admin__container_swapButtons--btnEventTypes"),schedulesTable=document.getElementsByClassName("admin__container_tableContainer--schedulesTable"),usersTable=document.getElementsByClassName("admin__container_tableContainer--usersTable"),eventsTable=document.getElementsByClassName("admin__container_tableContainer--eventsTable"),addEventTypeButton=document.getElementById("btnEventManage"),hName=document.getElementById("headerName"),hNameSmall=document.getElementById("headerNameSmall"),uImg=document.getElementById("userImage"),uImgSmall=document.getElementById("userImageSmall");function dateConverter(e){return new Date(e)}function dateFormater(e){return e.getDay()+"."+e.getMonth()+"."+e.getFullYear()+"."}function eventDateFormatter(e,t,n,o,l){return l<10?n+"-"+t+"-"+e+" "+o+":0"+l:n+"-"+t+"-"+e+" "+o+":"+l}function getUserRole(e){return!0===e?"Admin":"User"}if(function(){var e=document.cookie.slice(7);-1===window.location.href.indexOf("login")&&fetch(`${getUserURL}${e}`).then((e=>e.json())).then((e=>{null!=hName&&(hName.innerText=e.firstName+" "+e.lastName,hNameSmall.innerText=e.firstName,uImg.src=e.photo,uImgSmall.src=e.photo)}))}(),null!==manageModalButton&&(manageModalButton.onclick=function(){manageModal.style.display="block"}),void 0!==closeManageModalButton&&(closeManageModalButton.onclick=function(){manageModal.style.display="none"}),null!=closeConfirmModalButton&&(closeConfirmModalButton.onclick=function(){confirmModal.style.display="none",confirmModalUserAccept.style.display="none",confirmModalEventAccept.style.display="none",confirmModalScheduleAccept.style.display="none"}),null!=confirmModalCancelButton&&(confirmModalCancelButton.onclick=function(){confirmModal.style.display="none",confirmModalUserAccept.style.display="none",confirmModalEventAccept.style.display="none",confirmModalScheduleAccept.style.display="none"}),null!==addEventTypeButton&&addEventTypeButton.addEventListener("click",(()=>{var e=document.getElementById("eventTypeName").value,t=document.getElementById("eventLocation").value,n=document.getElementById("eventMaxParticipants").value,o=document.getElementById("eventMinParticipants").value;addEventType(allEventsURL,{type:e,location:t,minUsers:o,maxUsers:n}),location.reload()})),null!=schedulesTableButton[0]&&schedulesTableButton[0].addEventListener("click",(()=>{!0!==schedulesTable[0].classList.contains("tableShown")&&(usersTable[0].classList.remove("tableShown"),usersTableButton[0].classList.remove("activeButton"),usersTableButton[0].classList.add("disabled"),eventsTable[0].classList.remove("tableShown"),eventsTableButton[0].classList.remove("activeButton"),eventsTableButton[0].classList.add("disabled"),schedulesTable[0].classList.add("tableShown"),schedulesTableButton[0].classList.add("activeButton"),schedulesTableButton[0].classList.remove("disabled"))})),null!=schedulesTableButton[0]&&usersTableButton[0].addEventListener("click",(()=>{!0!==usersTable[0].classList.contains("tableShown")&&(schedulesTable[0].classList.remove("tableShown"),schedulesTableButton[0].classList.remove("activeButton"),schedulesTableButton[0].classList.add("disabled"),eventsTable[0].classList.remove("tableShown"),eventsTableButton[0].classList.remove("activeButton"),eventsTableButton[0].classList.add("disabled"),usersTable[0].classList.add("tableShown"),usersTableButton[0].classList.add("activeButton"),usersTableButton[0].classList.remove("disabled"))})),null!=eventsTableButton[0]&&eventsTableButton[0].addEventListener("click",(()=>{!0!==eventsTable[0].classList.contains("tableShown")&&(schedulesTable[0].classList.remove("tableShown"),schedulesTableButton[0].classList.remove("activeButton"),schedulesTableButton[0].classList.add("disabled"),usersTable[0].classList.remove("tableShown"),usersTableButton[0].classList.remove("activeButton"),usersTableButton[0].classList.add("disabled"),eventsTable[0].classList.add("tableShown"),eventsTableButton[0].classList.add("activeButton"),eventsTableButton[0].classList.remove("disabled"))})),-1===window.location.href.indexOf("login")&&fetch(allSchedulesURL).then((e=>e.json())).then((e=>{var t=document.createElement("tbody");null!=schedulesTable[0]&&schedulesTable[0].appendChild(t),e.forEach((e=>{var n=document.createElement("tr");t.appendChild(n);var o=document.createElement("td"),l=document.createTextNode(e.event.type);o.appendChild(l),n.appendChild(o);var a=document.createElement("td"),s=document.createTextNode(e.event.location);a.appendChild(s),n.appendChild(a);var d=document.createElement("td"),i=document.createTextNode(e.user.firstName+" "+e.user.lastName);d.appendChild(i),n.appendChild(d);var c=document.createElement("td"),m=document.createTextNode("");fetch(eventAttendeesCountURL+e.event.id).then((e=>e.json())).then((e=>{m.nodeValue=e})),c.appendChild(m),n.appendChild(c);var r=document.createElement("td"),u=eventDateFormatter(e.dateAndTime[0],e.dateAndTime[1],e.dateAndTime[2],e.dateAndTime[3],e.dateAndTime[4]),g=document.createTextNode(u);r.appendChild(g),n.appendChild(r);var p=document.createElement("td"),h=document.createElement("button");h.className="btn btns mx-2",h.addEventListener("click",(()=>{confirmModal.style.display="block",confrimModalText.innerHTML="Are you sure you want to delete this event?",confirmModalScheduleAccept.style.display="inline-block",confirmModalScheduleAccept.onclick=()=>{deleteSchedule(e.id),confirmModal.style.display="none",confirmModalScheduleAccept.style.display="none",location.reload()}}));var f=document.createElement("i");f.className="fas fa-trash",h.appendChild(f),p.appendChild(h),n.appendChild(p)}))})),-1===window.location.href.indexOf("login")&&fetch(allUsersURL).then((e=>e.json())).then((e=>{var t=document.createElement("tbody");null!=usersTable[0]&&usersTable[0].appendChild(t),e.forEach((e=>{var n=document.createElement("tr");t.appendChild(n);var o=document.createElement("td"),l=document.createTextNode(e.firstName+" "+e.lastName);o.appendChild(l),n.appendChild(o);var a=document.createElement("td"),s=dateFormater(dateConverter(e.dateOfBirth)),d=document.createTextNode(s);a.appendChild(d),n.appendChild(a);var i=document.createElement("td"),c=document.createTextNode(e.phoneNumber);i.appendChild(c),n.appendChild(i);var m=document.createElement("td"),r=document.createTextNode(e.seniority);m.appendChild(r),n.appendChild(m);var u=document.createElement("td"),g=document.createTextNode(e.jobTitle);u.appendChild(g),n.appendChild(u);var p=document.createElement("td"),h=getUserRole(e.role),f=document.createTextNode(h);p.appendChild(f),n.appendChild(p);var y=document.createElement("td"),E=document.createElement("button");E.className="btn btns mx-2",E.addEventListener("click",(()=>{confrimModalText.innerHTML="Are you sure you want to delete this user?",confirmModalUserAccept.style.display="inline-block",confirmModal.style.display="block",confirmModalUserAccept.onclick=()=>{deleteUser(e.id).then((e=>{200===e.status?(confirmModalUserAccept.style.display="none",confrimModalText.innerHTML="It appears that this user is connected to a schedule, therefore you can't delete him/her. Check user connections if you still want to delete this user.",confrimModalText.style.fontSize="11pt"):(location.reload(),confirmModalUserAccept.style.display="none")}))}}));var v=document.createElement("i");v.className="fas fa-trash",E.appendChild(v),y.appendChild(E),n.appendChild(y)}))})),-1===window.location.href.indexOf("login")&&fetch(allEventsURL).then((e=>e.json())).then((e=>{var t=document.createElement("tbody");null!=eventsTable[0]&&eventsTable[0].appendChild(t),e.forEach((e=>{var n=document.createElement("tr");t.appendChild(n);var o=document.createElement("td"),l=document.createTextNode(e.type);o.appendChild(l),n.appendChild(o);var a=document.createElement("td"),s=document.createTextNode(e.location);a.appendChild(s),n.appendChild(a);var d=document.createElement("td"),i=document.createTextNode(e.minUsers);d.appendChild(i),n.appendChild(d);var c=document.createElement("td"),m=document.createTextNode(e.maxUsers);c.appendChild(m),n.appendChild(c);var r=document.createElement("td"),u=document.createElement("button");u.className="btn btns mx-2",u.addEventListener("click",(()=>{confirmModal.style.display="block",confrimModalText.innerHTML="Are you sure you want to delete this event type?",confirmModalEventAccept.style.display="inline-block",confirmModalEventAccept.onclick=()=>{deleteEventType(e.id).then((e=>{200===e.status?(confirmModalEventAccept.style.display="none",confrimModalText.innerHTML="It appears that this event type is connected to a schedule, therefore you can't delete it. Check event type connections if you still want to delete it.",confrimModalText.style.fontSize="11pt"):(location.reload(),confirmModalEventAccept.style.display="none")}))}}));var g=document.createElement("i");g.className="fas fa-trash",u.appendChild(g),r.appendChild(u),n.appendChild(r)}))})),-1!==window.location.href.indexOf("login"))function deleteUser(e){return fetch(`${deleteUserURL}${e}`,{method:"DELETE",headers:{"Content-Type":"application/json"}})}function deleteSchedule(e){return fetch(`${deleteScheduleURL}${e}`,{method:"DELETE",headers:{"Content-Type":"application/json"}})}if(-1!==window.location.href.indexOf("login"))function deleteEventType(e){return fetch(`${deleteEventURL}${e}`,{method:"DELETE",headers:{"Content-Type":"application/json"}})}async function addEventType(e="",t={}){const n=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return await n.json()}let btn1=document.getElementById("button-check"),offOn=document.getElementById("off-on"),htmll=document.documentElement,logo=document.getElementById("asset");function darkmode(){document.body.style.transition="0.5s",htmll.dataset.mode="dark",null===offOn&&void 0===offOn&&null===btn1&&void 0===btn1||(offOn.innerHTML="&#x2714;",btn1.classList.add("pl-2"),logo.setAttribute("src","Resources/enjoyingLogo/2x/asset2.png"),localStorage.setItem("isDarkMode",!0))}function lightmode(){null===offOn&&void 0===offOn&&null===btn1&&void 0===btn1||(htmll.dataset.mode="light",localStorage.setItem("isDarkMode",!1),offOn.textContent="",btn1.classList.remove("pl-2"),logo.setAttribute("src","Resources/enjoyingLogo/2x/asset.png"),"true"===localStorage.getItem("isDarkMode")&&darkmode())}null!==btn1&&btn1.addEventListener("click",(()=>{"true"===localStorage.getItem("isDarkMode")?lightmode():darkmode()}));var modal=document.getElementById("manageModal"),btnManage=document.getElementById("btnManage"),span=document.getElementsByClassName("close")[0],close=document.getElementById("close"),forgetEmail=document.getElementById("forgetEmail"),msgResetPassword=document.getElementById("msgResetPassword");null!=btnManage&&(btnManage.onclick=function(){modal.style.display="block"}),null!=span&&(span.onclick=function(){modal.style.display="none",forgetEmail.value="",msgResetPassword.classList.remove("d-flex"),msgResetPassword.classList.add("d-none")});const signUpButton=document.getElementById("signUp"),signInButton=document.getElementById("signIn"),form=document.getElementById("form");var inputEmail=document.getElementById("emailSignin"),messageBox=document.getElementById("emailInputCheckup"),btnSignin=document.getElementById("btnSignin"),btnSignup=document.getElementById("btnSignup");function emailIsValid(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}function msgFunction(e){var t=document.getElementById(e);t.classList.add("alert"),t.classList.remove("d-none"),t.classList.add("d-flex"),t.classList.add("justify-content-center"),t.classList.add("flex-row")}function successFunction(e){msgFunction(e);var t=document.getElementById(e);t.classList.remove("alert-danger"),t.classList.add("alert-success")}function errorFunction(e){msgFunction(e);var t=document.getElementById(e);t.classList.remove("alert-success"),t.classList.add("alert-danger")}function noticeFunction(e){msgFunction(e);var t=document.getElementById(e);t.classList.remove("alert-success"),t.classList.remove("alert-danger"),t.classList.add("alert-secondary")}null!=inputEmail&&inputEmail.addEventListener("focusout",(e=>{const t=new URLSearchParams;t.append("email",e.target.value),t.append("password","signupPassword"),t.append("firstName","signupFirstName"),t.append("lastName","signupLastName"),fetch("http://localhost:8080/signup",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:t.toString()}).then((e=>e.json())).then((e=>{"Verification e-mail is already sent."===e.msgSignup||"Please check your e-mail adress"===e.msgSignup?messageBox.innerHTML="There is no user with this email!":messageBox.innerHTML=""}))})),window.onload=function(){signInButton.style.borderBottom="2px solid white"},null!=signUpButton&&signUpButton.addEventListener("click",(()=>{form.classList.add("right-panel-active"),signUpButton.style.borderBottom="2px solid white",signInButton.style.borderBottom="none"})),null!=signInButton&&signInButton.addEventListener("click",(()=>{form.classList.remove("right-panel-active"),signUpButton.style.borderBottom="none",signInButton.style.borderBottom="2px solid white"})),null!=btnSignin&&(btnSignin.onclick=function(e){e.preventDefault();var t=document.getElementById("emailSignin").value,n=document.getElementById("passwordSignin").value;const o=new URLSearchParams;o.append("username",t),o.append("password",n),fetch("http://localhost:8080/login",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:o.toString()}).then((e=>e.json())).then((e=>{if("success"==e.msgType)window.location.href="http://localhost:8080/HomePage";else if("error"==e.msgType){!function(){document.getElementById("btnSignin").style.marginTop="0px";var e=document.getElementById("singInMsg");e.classList.add("alert"),e.classList.remove("d-none"),e.classList.add("d-block")}(),document.getElementById("singInMsg").classList.add("alert-danger"),document.getElementById("singInMsg").innerText=e.message}}))}),null!=btnSignup&&(btnSignup.onclick=function(e){e.preventDefault();var t=document.getElementById("firstNameSignup").value,n=document.getElementById("lastNameSignup").value,o=document.getElementById("emailSignup").value,l=document.getElementById("passwordSignup").value;const a=new URLSearchParams;if(a.append("email",o),a.append("password",l),a.append("firstName",t),a.append("lastName",n),""===document.getElementById("firstNameSignup").value)errorFunction(s="msgSignup"),document.getElementById(s).innerText="Please enter your first name.";else if(""===document.getElementById("lastNameSignup").value){errorFunction(s="msgSignup"),document.getElementById(s).innerText="Please enter your last name."}else if(emailIsValid(o)&&l.length>=6)fetch("http://localhost:8080/signup",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:a.toString()}).then((e=>e.json())).then((e=>{console.log(t),console.log(e);var n="msgSignup";if("Please check your e-mail adress"==e.msgSignup)successFunction(n),document.getElementById(n).innerText=e.msgSignup;else if("User account already exists. Please sign in."==e.msgSignup){errorFunction(n),document.getElementById(n).innerText=e.msgSignup}else if("Verification e-mail is already sent."==e.msgSignup){errorFunction(n),document.getElementById(n).innerText=e.msgSignup}}));else{var s="msgSignup";if(emailIsValid(o))errorFunction(s),document.getElementById(s).innerText="Password must contain 6 or more characters";else errorFunction(s),document.getElementById(s).innerText="E-mail address is not in correct format"}});var passwordLogin=document.getElementById("passwordSignin");null!=passwordLogin&&passwordLogin.addEventListener("keyup",(function(e){13===e.keyCode&&(e.preventDefault(),document.getElementById("btnSignin").click())}));var passwordSignup=document.getElementById("passwordSignup");null!=passwordSignup&&passwordSignup.addEventListener("keyup",(function(e){13===e.keyCode&&(e.preventDefault(),document.getElementById("btnSignup").click())}));var notification=document.getElementsByClassName("notification"),pickSubmit=document.getElementById("pick-submit"),filter=document.getElementById("date-input"),today=new Date,dd=String(today.getDate()).padStart(2,"0"),mm=String(today.getMonth()+1).padStart(2,"0"),yyyy=today.getFullYear();function dateParsedNews(){var e=document.querySelectorAll(".dateParsed");console.log(e);var t=[];for(i=0;i<e.length;i++)t[i]=e[i].outerText.split("T");for(console.log(t),i=0;i<e.length;i++)e[i].innerHTML=t[i].join(" ")}function emailIsValid(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}function msgFunction(e){console.log(e);var t=document.getElementById(e);t.classList.add("alert"),t.classList.remove("d-none"),t.classList.add("d-flex"),t.classList.add("justify-content-center"),t.classList.add("flex-row")}function successFunction(e){msgFunction(e);var t=document.getElementById(e);t.classList.remove("alert-danger"),t.classList.add("alert-success")}function errorFunction(e){msgFunction(e);var t=document.getElementById(e);t.classList.remove("alert-success"),t.classList.add("alert-danger")}function noticeFunction(e){msgFunction(e);var t=document.getElementById(e);t.classList.remove("alert-success"),t.classList.remove("alert-danger"),t.classList.add("alert-secondary")}function check(){password=document.getElementById("password").value,confirmPassword=document.getElementById("confirmPassword").value,password==confirmPassword&&password.length>=6&&confirmPassword.length>=6?(document.getElementById("password").classList.remove("is-invalid"),document.getElementById("confirmPassword").classList.remove("is-invalid"),document.getElementById("password").classList.add("is-valid"),document.getElementById("confirmPassword").classList.add("is-valid")):(document.getElementById("password").classList.remove("is-valid"),document.getElementById("confirmPassword").classList.remove("is-valid"),document.getElementById("password").classList.add("is-invalid"),document.getElementById("confirmPassword").classList.add("is-invalid")),""==password&&""==confirmPassword&&(document.getElementById("password").classList.remove("is-valid"),document.getElementById("password").classList.remove("is-invalid"),document.getElementById("confirmPassword").classList.remove("is-valid"),document.getElementById("confirmPassword").classList.remove("is-invalid"))}today=yyyy+"-"+mm+"-"+dd,-1===window.location.href.indexOf("login")&&function(){console.log(document.cookie);var e=document.cookie.slice(7);-1===window.location.href.indexOf("login")&&fetch(`http://localhost:8080/users/${e}`).then((e=>(console.log(e),e.json()))).then((e=>{headerName=document.getElementById("headerName"),himgsmall=document.getElementById("headerNameSmall"),userimg=document.getElementById("userImage"),uimgsmall=document.getElementById("userImageSmall"),helloname=document.getElementById("helloName"),null!=headerName&&(headerName.innerText=e.firstName+" "+e.lastName),null!=himgsmall&&(himgsmall.innerText=e.firstName),null!=userimg&&(userimg.src=e.photo),null!=uimgsmall&&(uimgsmall.src=e.photo),null!=helloname&&(helloname.innerText="Hello "+e.firstName+" "+e.lastName+"!")}))}(),function(){console.log(document.cookie);var e=document.cookie.slice(7);-1===window.location.href.indexOf("login")&&fetch(`http://localhost:8080/schedules/${e}`).then((e=>(console.log(e),e.json()))).then((e=>{var t=document.getElementById("myList");document.getElementById("acceptButton");for(i=0;i<e.length;i++){var n=document.createElement("a"),o=document.createElement("b"),l=document.createElement("b"),a=document.createElement("button");a.classList.add("btn"),a.classList.add("btns"),a.classList.add("ml-1"),a.classList.add("mr-2"),a.classList.add("p-0"),a.value=e[i].id,console.log(e[i].id),a.setAttribute("id","acceptButton"),a.onclick=function(){var e=document.getElementById("acceptButton").value,t=document.cookie.slice(7);-1===window.location.href.indexOf("login")&&fetch(`http://localhost:8080/acceptButton/${e}`,{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({id:t})}).then((e=>(console.log(e),e.text()))).then((e=>{window.location.href="http://localhost:8080/HomePage"}))};var s=document.createElement("i");s.className="fas fa-check";var d=document.createElement("i");d.className="fas fa-times";var c=document.createElement("button");if(c.classList.add("btn"),c.classList.add("btns"),c.classList.add("m-0"),c.classList.add("p-0"),c.value=e[i].id,c.setAttribute("id","declineButton"),c.onclick=function(){var e=document.getElementById("declineButton").value,t=document.cookie.slice(7);-1===window.location.href.indexOf("login")&&fetch(`http://localhost:8080/declineButton/${e}`,{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({id:t})}).then((e=>(console.log(e),e.text()))).then((e=>{window.location.href="http://localhost:8080/HomePage"}))},o.innerHTML=e[i].user.firstName+" "+e[i].user.lastName,l.innerHTML=e[i].event.type+"  ",n.innerHTML=" added you to a new event ",null!=t&&(t.appendChild(o),t.appendChild(n),t.appendChild(l)),null!=l){l.appendChild(a),l.appendChild(c);var m=document.createElement("br");l.append(m)}null!=a&&a.appendChild(s),null!=c&&c.append(d)}}))}(),null==pickSubmit&&null==pickSubmit||(pickSubmit.onclick=function(){for(var e=document.getElementsByClassName("notification"),t=document.getElementsByClassName("dateTime"),n=0;n<t.length;n++)console.log(t[n].innerHTML.slice(0,10)),e[n].dataset.date=t[n].innerHTML.slice(0,10);for(n=0;n<e.length;n++)e[n].style.display="block",t=e[n].dataset.date,""==filter.value&&(filter.value=today),t!=filter.value&&(e[n].style.display="none")}),dateParsedNews(),btnreset=document.getElementById("btnResetPassword"),null!=btnreset&&(btnreset.onclick=function(e){e.preventDefault();var t=document.getElementById("forgetEmail").value;const n=new URLSearchParams;if(n.append("email",t),emailIsValid(t))fetch("http://localhost:8080/password",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n.toString()}).then((e=>e.json())).then((e=>{console.log(e);var t="msgResetPassword";if("Please check your email and click on the provided link to reset your password."==e.msgResetPassword)successFunction(t),document.getElementById(t).innerText=e.msgResetPassword;else if("Account with that e-mail doesn't exist."==e.msgResetPassword){errorFunction(t),document.getElementById(t).innerText=e.msgResetPassword}else if("You cannot change password because you haven't verified your e-mail address."==e.msgResetPassword){errorFunction(t),document.getElementById(t).innerText=e.msgResetPassword}else if("Reset password link is already sent to that e-mail address."==e.msgResetPassword){errorFunction(t),document.getElementById(t).innerText=e.msgResetPassword}}));else{var o="msgResetPassword";errorFunction(o),document.getElementById(o).innerText="E-mail address is not in correct format"}});var collapseContent=document.getElementById("navbarToggleExternalContent");window.innerWidth<769&&collapseContent.classList.add("collapse"),window.addEventListener("resize",(()=>{window.innerWidth<768?collapseContent.classList.add("collapse"):collapseContent.classList.remove("collapse")}));var fetchedFirstName,fetchedLastName,fetchedBirth,fetchedEmail,fetchedNumber,fetchedSeniority,fetchedPosition,fetchedOffice,id,toggleButton=document.getElementsByClassName("btn_toggle")[0];toggleButton.addEventListener("click",(()=>{toggleButton.classList.contains("is-active")?toggleButton.classList.remove("is-active"):toggleButton.classList.add("is-active")})),id=document.cookie.slice(7),-1===window.location.href.indexOf("login")&&fetch(`http://localhost:8080/users/${id}`).then((e=>e.json())).then((e=>{fetchedBirth=new Date(e.dateOfBirth),fetchedFirstName=e.firstName,fetchedEmail=e.email,fetchedLastName=e.lastName,fetchedSeniority=e.seniority,fetchedPosition=e.jobTitle,fetchedOffice=e.companyLocation,fetchedNumber=e.phoneNumber,fetchedPhoto=e.photo,fullname=document.getElementById("fullName"),imgUser=document.getElementById("imgUser"),headerName=document.getElementById("headerName"),himgsmall=document.getElementById("headerNameSmall"),userimg=document.getElementById("userImage"),uimgsmall=document.getElementById("userImageSmall"),email=document.getElementById("email"),bdate=document.getElementById("birthDate"),number=document.getElementById("number"),position=document.getElementById("position"),office=document.getElementById("office"),null!=fullname&&(fullname.innerText=fetchedFirstName+" "+fetchedLastName),null!=headerName&&(headerName.innerText=fetchedFirstName+" "+fetchedLastName),null!=himgsmall&&(himgsmall.innerText=fetchedFirstName),null!=userimg&&(userimg.src=fetchedPhoto),null!=uimgsmall&&(uimgsmall.src=fetchedPhoto),null!=imgUser&&(imgUser.src=fetchedPhoto),null!=email&&(email.innerText=fetchedEmail),null!=bdate&&(bdate.innerText=fetchedBirth.toLocaleDateString()),null!=number&&(number.innerText=fetchedNumber),null!=position&&(position.innerText=fetchedSeniority+" "+fetchedPosition),null!=office&&(office.innerText=fetchedOffice)})),window.onload=function(){var e=document.getElementById("edit");null!=e&&(e.style.setProperty("display","none","important"),setTimeout((function(){var e=document.getElementById("loader");null!=e&&(e.classList.contains("done")||e.classList.add("done"))}),1e3))};var slika,btnEdit=document.getElementById("btnEdit");null!=btnEdit&&btnEdit.addEventListener("click",(function(){btnEdit.style.display="none",document.getElementById("inputFirstName").value=fetchedFirstName,document.getElementById("inputLastName").value=fetchedLastName,document.getElementById("date-input").value=fetchedBirth.toLocaleDateString(),document.getElementById("inputPosition").value=fetchedPosition,document.getElementById("selectOffice").selectedIndex="Nis"==fetchedOffice?"0":"Beograd"==fetchedOffice?"1":"2",document.getElementById("selectSeniority").selectedIndex="Junior"==fetchedSeniority?"0":"Medior"==fetchedSeniority?"1":"2",document.getElementById("inputNumber").value=fetchedNumber,document.getElementById("image").src=fetchedPhoto,document.getElementById("main").classList.add("edit-panel-active"),document.getElementById("content").style.setProperty("display","none","important"),document.getElementById("imgInput").style.setProperty("display","none"),document.getElementById("edit").style.setProperty("display","flex","important"),document.getElementById("btnImage").addEventListener("click",(function(){document.getElementById("imgInput").click()}))}));var loadFile=function(e){var t=document.getElementById("image"),n=document.getElementById("imgUser");t.src=URL.createObjectURL(e.target.files[0]);var o=e.target.files[0];console.log(o),n.src=URL.createObjectURL(e.target.files[0]),slika=URL.createObjectURL(e.target.files[0]);const l=new FormData;l.append("imageFile",o),console.log(l.get("imageFile"));var a=document.cookie.slice(7);console.log(a),-1===window.location.href.indexOf("login")&&fetch(`http://localhost:8080/uploadAvatar/${a}`,{method:"PUT",body:l}).then((e=>(console.log(e),e.text()))).then((e=>{console.log(e)}))},btnDone=document.getElementById("btnDone");null!=btnDone&&(btnDone.onclick=function(){var e=document.getElementById("inputFirstName").value,t=document.getElementById("inputLastName").value,n=new Date(document.getElementById("date-input").value).getTime();console.log(n);var o=document.getElementById("inputPosition").value,l=document.getElementById("selectSeniority"),a=document.getElementById("inputNumber").value,s=document.getElementById("selectOffice"),d=l.options[l.selectedIndex].text,i=s.options[s.selectedIndex].text;-1===window.location.href.indexOf("login")&&fetch(`http://localhost:8080/users/${id}`,{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({firstName:e,lastName:t,dateOfBirth:n,companyLocation:i,jobTitle:o,seniority:d,phoneNumber:a})}).then((e=>(console.log(e),e.json()))).then((e=>{console.log(e),fetchedBirth=new Date(e.dateOfBirth),fetchedFirstName=e.firstName,fetchedLastName=e.lastName,fetchedSeniority=e.seniority,fetchedPosition=e.jobTitle,fetchedPhoto=e.photo,fetchedOffice=e.companyLocation,fetchedNumber=e.phoneNumber})),btnEdit.style.display="block";var c=document.getElementById("form"),m=new FormData(c);console.log(m),m.forEach((e=>console.log(e)));var r=document.getElementById("imgInput");console.log(r.value),document.getElementById("edit").style.setProperty("display","none","important"),document.getElementById("content").style.setProperty("display","flex","important"),document.getElementById("fullName").innerText=m.get("inputFirstName")+" "+m.get("inputLastName"),document.getElementById("headerName").innerText=m.get("inputFirstName")+" "+m.get("inputLastName"),document.getElementById("birthDate").innerText=m.get("date-input"),document.getElementById("position").innerText=m.get("inputSeniority")+" "+m.get("inputPosition"),document.getElementById("office").innerText=m.get("inputOffice"),document.getElementById("email").innerText=fetchedEmail,slika&&(document.getElementById("imgUser").src=slika,document.getElementById("image").src=slika,document.getElementById("userImage").src=slika,document.getElementById("userImageSmall").src=slika)});modal=document.getElementById("profileModal");var btnProfile=document.querySelectorAll(".avatar__button").forEach((e=>e.addEventListener("click",(function(){var t=e.value;console.log(t);var n=document.getElementById(t).querySelectorAll(".users");console.log(n[0].innerHTML),document.getElementById("fullNameProfile").innerHTML=n[0].innerHTML+" "+n[1].innerHTML,document.getElementById("emailProfile").innerHTML=n[2].innerHTML,document.getElementById("birthDateProfile").innerHTML=n[3].innerHTML,document.getElementById("numberProfile").innerHTML=n[4].innerHTML,document.getElementById("positionProfile").innerHTML=n[5].innerHTML,document.getElementById("seniorityProfile").innerHTML=n[6].innerHTML,document.getElementById("officeProfile").innerHTML=n[7].innerHTML,modal.style.display="block"}))));null!=(span=document.getElementsByClassName("close")[0])&&(span.onclick=function(){modal.style.display="none"});let usersearch=document.getElementById("users-search");!function(){console.log(document.cookie);var e=document.cookie.slice(7);-1===window.location.href.indexOf("login")&&fetch(`http://localhost:8080/users/${e}`).then((e=>(console.log(e),e.json()))).then((e=>{document.getElementById("headerName").innerText=e.firstName+" "+e.lastName,document.getElementById("headerNameSmall").innerText=e.firstName,document.getElementById("userImage").src=e.photo,document.getElementById("userImageSmall").src=e.photo}))}(),null!=usersearch&&usersearch.addEventListener("keyup",(e=>{let t=document.getElementById("users");const n=e.target.value.toLowerCase(),o=t.getElementsByClassName("user");Array.from(o).forEach((e=>{-1!=e.firstElementChild.firstElementChild.nextElementSibling.textContent.toLowerCase().indexOf(n)?(e.firstElementChild.style.display="flex",e.style.display="block",e.classList.add("col-12"),e.classList.add("col-lg-3"),e.classList.add("px-3")):(e.firstElementChild.style.display="none",e.classList.remove("col-12"),e.classList.remove("col-lg-3"),e.classList.remove("px-3"))}))}));